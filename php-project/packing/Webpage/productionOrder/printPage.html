<div id="yuuo">
    <!DOCTYPE html>
    <html lang="th">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>สร้างตารางและพิมพ์</title>
        <!-- เรียกใช้ Bootstrap 5 CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

        <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.21/jspdf.plugin.autotable.min.js"></script> -->


        <script type="text/javascript" src="\packing/js/QRCodeGen/jquery.min.js"></script>
        <script type="text/javascript" src="\packing/js/QRCodeGen/qrcode.js"></script>

        <style>
            /* กำหนดสไตล์เพิ่มเติม */
            .row1 {
                background-color: rgb(0, 0, 0);
                text-align: right;
                width: 50%;
                font-weight: bold;
            }

            .col2{

                width: 900px;
            }

            /* จัดให้อยู่กลางเมื่อพิมพ์ */
            @media print {
                table {
                    width: 100%;
                }
            }
            #myTable td, #myTable th {
                border-color: black; /* เส้นขอบสีดำ */
                border-width: 1px; /* กำหนดความหนาเส้นขอบ */
                border-style: solid; /* กำหนดสไตล์เส้นขอบเป็นเส้นตรง */
            }

        </style>
    </head>

    <body>

        <div class=" mt-5">
            <h2 class="" style="position:absolute; top:20px; left:11%;"> PRODUCTION ORDER FOR MODULE DELIVERY</h2>
            <br>
            <div class="row mt-5">
                
                <div class="col-9" > 
                    
                    <table class="table table-bordered " id="myTable" style="margin-left: 17%;">
                        <tbody>
                            
                            <tr>
                                <td class="row1">Qrcode</td>
                                <td class="col2"  style="width: 100%;" > 
                                    <div id="qrcode" style="margin-left: 35%;"></div>
                                    <!-- <iframe id="qrcode" src="" width="160" height="160" style="margin-left: 20%; border-color: black; border-width: 2px; border-style: solid;"></iframe> -->
                                </td>
                            </tr>
                            <tr>
                                <td class="row1" style="width: 340px;">NO./PO</td>
                                <td id="po" class="col2"  style="width: 100%;" ></td>
                            </tr>
                            <tr>
                                <td class="row1">Issue date</td>
                                <td id="issue_datetime" class="col2"></td>
                            </tr>
                            <tr>
                                <td class="row1">Category</td>
                                <td id="category" class="col2"></td>
                            </tr>
                            <tr>
                                <td class="row1">Production order no./PO</td>
                                <td id="pd_order" class="col2"></td>
                            </tr>
                            <tr>
                                <td class="row1">Item Description</td>
                                <td id="item_des" class="col2"></td>
                            </tr>
                            <tr>
                                <td class="row1">Model</td>
                                <td id="md_type" class="col2"></td>
                            </tr>
                            <tr>
                                <td class="row1">Cell Grade</td>
                                <td id="md_grade" class="col2"></td>
                            </tr>
                            <tr>
                                <td class="row1">Production Q'ty (Module)</td>
                                <td id="pd_qty" class="col2"></td>
                            </tr>
                            <tr>
                                <td class="row1">Production status</td>
                                <td id="pd_status" class="col2"></td>
                            </tr>
                            <tr>
                                <td class="row1">Production date</td>
                                <td id="pd_datetime" class="col2"></td>
                            </tr>
                            <tr>
                                <td class="row1">Remark</td>
                                <td id="remark" class="col2"></td>
                            </tr>
                            <tr>
                                <td class="row1">Delivery to</td>
                                <td id="d_to"  class="col2"></td>
                            </tr>
                            <!-- <tr>
                                <td class="row1">Delivery Q'ty (Module)</td>
                                <td id="" class="col2"></td>
                            </tr> -->
                            <!-- <tr>
                                <td class="row1">Delivery date</td>
                                <td id="d_datetime"  class="col2"></td>
                            </tr>
                            <tr>
                                <td class="row1">Delivery time</td>
                                <td id="" class="col2"></td>
                            </tr> -->
                            <tr>
                                <td class="row1">Packing style</td>
                                <td id="pack_style" class="col2"></td>
                            </tr>
                            <tr>
                                <td class="row1">Invoice no.</td>
                                <td id="invoice_no" class="col2"></td>
                            </tr>
                            <tr>
                                <td class="row1">Status</td>
                                <td id="status" class="col2"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>

        

        <script>
            // window.onload = function () {
            //     window.print();
            // }
        </script>

    </body>

    </html>
    <div style="margin-left: 43%; padding-right: 20%;">
        <div class="row">
            <button id="print_btn" style="width: 20%; margin-right: 1%; " class="btn btn-primary col-sm-5 col-md-6" onclick="printTable()">
                
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-printer-fill" viewBox="0 0 16 16">
                <path d="M5 1a2 2 0 0 0-2 2v1h10V3a2 2 0 0 0-2-2zm6 8H5a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1"/>
                <path d="M0 7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2h-1v-2a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2H2a2 2 0 0 1-2-2zm2.5 1a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1"/>
              </svg> 
              print
            </button>


            <button id="back_btn" style="width: 20%; margin-right: 1%;" class="btn btn-danger col-sm-5 offset-sm-2 col-md-6 offset-md-0" onclick="back()">

                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-return-left" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M14.5 1.5a.5.5 0 0 1 .5.5v4.8a2.5 2.5 0 0 1-2.5 2.5H2.707l3.347 3.346a.5.5 0 0 1-.708.708l-4.2-4.2a.5.5 0 0 1 0-.708l4-4a.5.5 0 1 1 .708.708L2.707 8.3H12.5A1.5 1.5 0 0 0 14 6.8V2a.5.5 0 0 1 .5-.5"/>
                  </svg>
                  back</button>

            
        </div>
    </div>

        
   
    

        



<script>
    

    //เรียกปลิ้น
    function printTable() {
        //เมื่อกด print จะซ่อนปุ่ม
        $('#print_btn').hide();
        $('#back_btn').hide();
        window.print();
       
    }
    window.onafterprint = function() {
        //เมื่อกดยกเลิก จะเเสดงปุ่ม
        $('#print_btn').show();
        $('#back_btn').show();
        };



    $(document).ready(function () {
        // รับค่า id จาก URL
        var urlParams = new URLSearchParams(window.location.search);
        var id = urlParams.get('id');

        if (id) {
            // ทำงานกับค่า id เช่น เรียกข้อมูลจากเซิร์ฟเวอร์หรือแสดงข้อมูล
       
            $.getJSON('GetOrder.php', function (response) {
        

                var item = response['Message']
                

                for (i in item) {
                   
                    data_item = item[i]
                    if (data_item['order_id'] == id) {
                
                        var category = data_item['category']
                        var d_datetime = data_item['d_datetime']
                        var d_to = data_item['d_to']
                        var flag = data_item['flag']
                        var invoice_no = data_item['invoice_no']
                        var issue_datetime = data_item['issue_datetime']
                        var item_des = data_item['item_des']
                        var md_grade = data_item['md_grade']
                        var md_type = data_item['md_type']
                        var order_id = data_item['order_id']
                        var pack_style = data_item['pack_style']
                        var pd_datetime = data_item['pd_datetime']
                        var pd_order = data_item['pd_order']
                        var pd_qty = data_item['pd_qty']
                        var pd_status = data_item['pd_status']
                        var po = data_item['po']
                        var qc_qty = data_item['qc_qty']
                        var remark = data_item['remark']
                        var Status = data_item['status']
                        var updatetime = data_item['updatetime']
                        var wh_date = data_item['wh_date']
                        var wh_qty = data_item['wh_qty']
                        var wh_status = data_item['wh_status']

                        var id_td = ['po', 'issue_datetime', 'category', 'pd_order', 'item_des', 'md_type', 'md_grade', 'pd_qty', 'pd_status', 'pd_datetime', 'remark', 'd_to', 'pack_style', 'invoice_no', 'status'];
                        var value_item = [po, issue_datetime, category, pd_order, item_des, md_type, md_grade, pd_qty, pd_status, pd_datetime, remark, d_to, pack_style, invoice_no, Status,]

                        for (var index in id_td) {
                            // console.log(document.getElementById(id_td[index]).innerText = value_item[index])
                            document.getElementById(id_td[index]).innerText = value_item[index];

                        }

                        //qr code text
                        makeCode(order_id);
                    }
                }
            });

        }

    });




// กลับไปหน้า productionorder
    function back(){
        window.location.href = "/packing/Webpage/productionOrder/formProductionOrder.php";
    }



    function makeCode(id) {
            var qrcode = new QRCode(document.getElementById("qrcode"), {
                width: 80,
                height: 80
            });

            var elText = id

            if (!elText) {
                elText.focus();
                return;
            }
            // let labelElement = document.getElementById("labelWithText");
            // labelElement.innerText = elText;
            qrcode.makeCode(elText);
        }
</script>